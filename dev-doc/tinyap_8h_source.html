<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>tinyap: tinyap.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">tinyap&#160;<span id="projectnumber">2</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>tinyap.h</h1>  </div>
</div>
<div class="contents">
<a href="tinyap_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Tinya(J)P : this is not yet another (Java) parser.</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2007 Damien Leroux</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00016"></a>00016 <span class="comment"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef _TINYAP_H__</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define _TINYAP_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00024"></a><a class="code" href="tinyap_8h.html#aaba045bb62f7a2db2131720e593f9140">00024</a> <span class="preprocessor">#define TINYAP_VERSION PACKAGE_VERSION</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00049"></a>00049 <span class="preprocessor">#endif</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#ifndef _TINYAP_AST_H__</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00052"></a><a class="code" href="tinyap_8h.html#ad8ed219d2f8f2b0218cda7a75be2dd41">00052</a> <span class="preprocessor"></span>        <span class="keyword">typedef</span> <span class="keyword">struct </span>_tinyap_t* <a class="code" href="tinyap_8h.html#ad8ed219d2f8f2b0218cda7a75be2dd41">tinyap_t</a>;
<a name="l00053"></a>00053 <span class="preprocessor">#ifndef _WAST_DEFINED</span>
<a name="l00054"></a><a class="code" href="tinyap_8h.html#ae26934fb321486ad6619df824143effa">00054</a> <span class="preprocessor"></span>        <span class="keyword">typedef</span> <span class="keyword">struct </span>_walkable_ast_t* <a class="code" href="tinyap_8h.html#ae26934fb321486ad6619df824143effa">wast_t</a>;
<a name="l00055"></a><a class="code" href="tinyap_8h.html#afaff3c8362a54e12955d4facab13b7a0">00055</a>         <span class="keyword">typedef</span> <span class="keyword">struct </span>_wast_iter_t* <a class="code" href="tinyap_8h.html#afaff3c8362a54e12955d4facab13b7a0">wast_iterator_t</a>;
<a name="l00056"></a><a class="code" href="tinyap_8h.html#a770988418abb28e8693f9f67571f35d6">00056</a> <span class="preprocessor">        #define _WAST_DEFINED</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;bootstrap.h&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;trie.h&quot;</span>
<a name="l00061"></a>00061 
<a name="l00064"></a>00064 
<a name="l00066"></a>00066         <span class="keywordtype">void</span> <a class="code" href="group__api__parser.html#ga6e563c56e022964985a471cfc8b364cd" title="initialize the tinyap environment.">tinyap_init</a>();
<a name="l00067"></a>00067 
<a name="l00071"></a>00071         tinyap_t        <a class="code" href="group__api__parser.html#ga57bd7af783f8815e55d7bd9f083472ca" title="create a new parser with default context. create a parser with &amp;quot;explicit&amp;quot; metagrammar diale...">tinyap_new</a>();
<a name="l00072"></a>00072 
<a name="l00074"></a>00074         <span class="keywordtype">void</span> <a class="code" href="group__api__parser.html#ga49a1c49bcffbb68368731f4801fba76d" title="set the parser verbosity">tinyap_set_verbose</a>(<span class="keywordtype">int</span>);
<a name="l00075"></a>00075 
<a name="l00077"></a>00077         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__parser.html#ga358248c20c8b239f4c64702eb985e2a5" title="access to whitespace characters list">tinyap_get_whitespace</a>(tinyap_t);
<a name="l00079"></a>00079         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#ga54b262578de65632c8b581928063bc78" title="modification of whitespace characters list">tinyap_set_whitespace</a>(tinyap_t,<span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00081"></a>00081         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#gab8bca2b64e2845fea2857aa5edba9c88" title="modification of whitespace recognition regexp">tinyap_set_whitespace_regexp</a>(tinyap_t,<span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00082"></a>00082 
<a name="l00084"></a>00084         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__parser.html#gad9f4e8394edc6157610bbe5323040e83" title="access to grammar source">tinyap_get_grammar</a>(tinyap_t);
<a name="l00086"></a>00086         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#gae76033daa6428f63ab55fbaf33e86559" title="modification of grammar source (any filename, or &amp;quot;explicit&amp;quot; or &amp;quot;CamelCasing&amp;quot;)">tinyap_set_grammar</a>(tinyap_t,<span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00087"></a>00087 
<a name="l00089"></a>00089         ast_node_t      <a class="code" href="group__api__parser.html#ga785c521aaacf8bb6b76d3473fb7575d6" title="access to grammar ast">tinyap_get_grammar_ast</a>(tinyap_t);
<a name="l00091"></a>00091         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#gad1552c03dd5651d22797052c11f6be53" title="modification of grammar ast">tinyap_set_grammar_ast</a>(tinyap_t,ast_node_t);
<a name="l00092"></a>00092 
<a name="l00094"></a>00094         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__parser.html#gaebf46f45543bef7abc7a16183e485e10" title="access to filename of text input source (may be NULL)">tinyap_get_source_file</a>(tinyap_t);
<a name="l00096"></a>00096         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__parser.html#ga5fce588f798754634e615556d23cb234" title="access to buffer of text input source (i.e. contents of file or configured memory buffer)...">tinyap_get_source_buffer</a>(tinyap_t);
<a name="l00098"></a>00098         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="group__api__parser.html#ga3d9a781425222f53fc541598e7e9b31d" title="access to length of text input source">tinyap_get_source_buffer_length</a>(tinyap_t);
<a name="l00100"></a>00100         <span class="keywordtype">float</span>           <a class="code" href="group__api__parser.html#ga015bfaae472290841e502788fe3eecee" title="access to duration of last parsing, in seconds">tinyap_get_parse_time</a>(tinyap_t);
<a name="l00102"></a>00102         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#ga3607dcb00a6e9f77d3d86c6969747d43" title="dump the last parse stack as a .dot file">tinyap_dump_stack</a>(tinyap_t, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00104"></a>00104         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#ga7d0f931baf01f3d797a43aa95ea97f47" title="output the LR automaton states">tinyap_print_states</a>(tinyap_t);
<a name="l00108"></a>00108         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#gac7b3eef1d0e6415be8f051616ae6e23b" title="set named file as text input CAUTION : if source filename is &amp;quot;-&amp;quot; or &amp;quot;stdin&amp;quot;, standard input will be read until closed, and the function will block meanwhile.">tinyap_set_source_file</a>(tinyap_t,<span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00110"></a>00110         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#gaf580a47f588edaa4e71c1417adfe29a4" title="set buffer as text input source">tinyap_set_source_buffer</a>(tinyap_t,<span class="keyword">const</span> <span class="keywordtype">char</span>*,<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>);
<a name="l00111"></a>00111 
<a name="l00113"></a>00113         trie_t          <a class="code" href="group__api__parser.html#gaf510cd5a66082d22b4f3c07c3312cfb5" title="access a Bag of Words by tag">tinyap_get_bow</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00114"></a>00114 
<a name="l00118"></a>00118         <span class="keywordtype">int</span> <a class="code" href="group__api__parser.html#gaa32aeac89d5801102f813153bfa9ce30" title="perform parsing of configured source with configured grammar. If the passed flag is true...">tinyap_parse</a>(tinyap_t, <span class="keywordtype">int</span>);
<a name="l00122"></a>00122         <span class="keywordtype">int</span> <a class="code" href="group__api__parser.html#gac43c0a5c5912415bf8e4eeb3c11a521a" title="perform parsing of configured source with configured grammar and uses the output as the new grammar...">tinyap_parse_as_grammar</a>(tinyap_t);
<a name="l00123"></a>00123 
<a name="l00128"></a>00128         <span class="keywordtype">int</span>             <a class="code" href="group__api__parser.html#ga76bb6c98d6441829ec0a647563944618" title="predicate &amp;quot;the last parsing was successful&amp;quot;">tinyap_parsed_ok</a>(<span class="keyword">const</span> tinyap_t);
<a name="l00129"></a>00129 
<a name="l00132"></a>00132         ast_node_t      <a class="code" href="group__api__parser.html#ga5837d9ab0520fe3c63258d31d2fbfb27" title="access to last parsing output">tinyap_get_output</a>(<span class="keyword">const</span> tinyap_t);
<a name="l00133"></a>00133 
<a name="l00136"></a>00136         <span class="keywordtype">int</span>             <a class="code" href="group__api__parser.html#gae8fc94643392875d0964bed7f128c71b" title="get the column where the parsing error occured in source text (offsets start at 1)">tinyap_get_error_col</a>(<span class="keyword">const</span> tinyap_t);
<a name="l00139"></a>00139         <span class="keywordtype">int</span>             <a class="code" href="group__api__parser.html#gaf1cfe686073bf2e67d6a16b5988374ce" title="get the line where the parsing error occured in source text (offsets start at 1)">tinyap_get_error_row</a>(<span class="keyword">const</span> tinyap_t);
<a name="l00140"></a>00140 
<a name="l00143"></a>00143         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__parser.html#gae813a4556e261c3bcdd09be392180fc8" title="get the source text around the parsing error, and a cursor indicating the column where the error occu...">tinyap_get_error</a>(<span class="keyword">const</span> tinyap_t);
<a name="l00144"></a>00144 
<a name="l00147"></a>00147         <span class="keywordtype">void</span>            <a class="code" href="group__api__parser.html#gaa5a6d8eb7d78c69d76b24c47a59371ad" title="delete an instance of a parser">tinyap_delete</a>(tinyap_t);
<a name="l00148"></a>00148 
<a name="l00151"></a>00151         <span class="keywordtype">void</span> <a class="code" href="group__api__parser.html#ga7aa58c744137ce1af067a04720ed7b8b" title="plug (NT plugin) at head of (Alt) element of rule (* plug (Alt)). Plugs must have this form...">tinyap_plug</a>(tinyap_t parser, <span class="keyword">const</span> <span class="keywordtype">char</span>*plugin, <span class="keyword">const</span> <span class="keywordtype">char</span>*plug);
<a name="l00152"></a>00152 
<a name="l00155"></a>00155         <span class="keywordtype">void</span> <a class="code" href="group__api__parser.html#gadf4753fa15b1aafb416710e99b0198d2" title="plug pin at head of (Alt) element of rule (* plug (Alt)). Plugs must have this form.">tinyap_plug_node</a>(tinyap_t parser, ast_node_t pin, <span class="keyword">const</span> <span class="keywordtype">char</span>*plugin, <span class="keyword">const</span> <span class="keywordtype">char</span>* plug);
<a name="l00156"></a>00156 
<a name="l00159"></a>00159         <span class="keywordtype">void</span> <a class="code" href="group__api__parser.html#ga355ec5f724f4f69f9778ce9d6e738abf" title="append this grammar to the existing grammar.">tinyap_append_grammar</a>(tinyap_t parser, ast_node_t supp);
<a name="l00166"></a>00166         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#ga6606bb9474345b80ad0ffe765a97bdd9" title="predicate &amp;quot;this node is nil&amp;quot;">tinyap_node_is_nil</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00170"></a>00170         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#ga6afab005be78182fd53a2aeaeaf25a9b" title="predicate &amp;quot;this node is a list&amp;quot;">tinyap_node_is_list</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00173"></a>00173         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="group__api__ast.html#ga78095fe982a6fd433f79dd0402575cc4" title="get the length of the list">tinyap_list_get_size</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00176"></a>00176         ast_node_t      <a class="code" href="group__api__ast.html#gaf82027c99c57d27d1f147702d4dbda77" title="access to the n-th element of this list">tinyap_list_get_element</a>(<span class="keyword">const</span> ast_node_t,<span class="keywordtype">int</span>);
<a name="l00180"></a>00180         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#gaca0840643204db7a83d851540155f132" title="predicate &amp;quot;this node is a string&amp;quot;">tinyap_node_is_string</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00183"></a>00183         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__ast.html#ga2f40ca608b71ed9bf7e99f325839ae5b" title="access to the string value of this atom">tinyap_node_get_string</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00186"></a>00186         ast_node_t      <a class="code" href="group__api__ast.html#gab68755b38422d3edde37ba45bf43c238" title="access to the n-th operand of this node ( (n+1)-th element of list)">tinyap_node_get_operand</a>(<span class="keyword">const</span> ast_node_t,<span class="keywordtype">int</span>);
<a name="l00189"></a>00189         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#ga10720e135646e3227732407f73f17d59" title="get the number of operands in this node (count(list)-1)">tinyap_node_get_operand_count</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00192"></a>00192         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__ast.html#gac8ac2341736100198f677b24517a7184" title="get the operator label of this node">tinyap_node_get_operator</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00193"></a>00193 
<a name="l00196"></a>00196         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#ga375694842109c18ade07173dfc625633" title="get the offset corresponding to this node in source text">tinyap_node_get_row</a>(tinyap_t, <span class="keyword">const</span> ast_node_t);
<a name="l00199"></a>00199         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#ga13bea2267329bea8aaf183080b59a14b" title="get the col corresponding to this node in source text">tinyap_node_get_col</a>(tinyap_t, <span class="keyword">const</span> ast_node_t);
<a name="l00200"></a>00200 
<a name="l00203"></a>00203         <span class="keywordtype">void</span>            <a class="code" href="group__api__ast.html#gaca1f72e03cba897b5dd558ca0fbe3e43" title="serialize this node to the named file">tinyap_serialize_to_file</a>(<span class="keyword">const</span> ast_node_t,<span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00206"></a>00206         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__ast.html#gad9c8ded4497d2d4872ac83d43183474c" title="serialize this node into a new C string (must be freed by the user)">tinyap_serialize_to_string</a>(<span class="keyword">const</span> ast_node_t);
<a name="l00207"></a>00207 
<a name="l00211"></a>00211         wast_t          <a class="code" href="group__api__ast.html#gad613651a4e1193be4fc08742d0bdbe6c" title="make this AST walkable.">tinyap_make_wast</a>(tinyap_t, <span class="keyword">const</span> ast_node_t);
<a name="l00212"></a>00212 
<a name="l00217"></a>00217         ast_node_t      <a class="code" href="group__api__ast.html#gaab175f73b5a23a3b9839e039e66a5eec" title="make this walkable AST a serializable AST. FIXME loses all offset info.">tinyap_make_ast</a>(<span class="keyword">const</span> wast_t);
<a name="l00218"></a>00218 
<a name="l00221"></a>00221         <span class="keywordtype">void</span>            <a class="code" href="group__api__ast.html#gabe6d1ddf256f07c6114db15ffff368b1" title="free this walkable AST.">tinyap_free_wast</a>(<span class="keyword">const</span> wast_t);
<a name="l00222"></a>00222 
<a name="l00225"></a>00225         wast_iterator_t <a class="code" href="group__api__ast.html#gaf1fe6f9ecb4e4b12c359a4a47951f383" title="create an iterator on this AST.">tinyap_wi_new</a>(<span class="keyword">const</span> wast_t);
<a name="l00226"></a><a class="code" href="group__api__ast.html#gaca059c9957b80bf7208d6fc449eb00f8">00226</a> <span class="preprocessor">        #define wi_new tinyap_wi_new</span>
<a name="l00227"></a>00227 <span class="preprocessor"></span>
<a name="l00230"></a>00230         wast_iterator_t <a class="code" href="group__api__ast.html#gabc7e664eefe92c646c8bd3e141c52f1f" title="reset an iterator to its initial state (on root, backup cleared).">tinyap_wi_reset</a>(wast_iterator_t);
<a name="l00231"></a><a class="code" href="group__api__ast.html#ga7648df9a758618d9d4f39def263dff44">00231</a> <span class="preprocessor">        #define wi_reset tinyap_wi_reset</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span>
<a name="l00235"></a>00235         <span class="keywordtype">void</span>            <a class="code" href="group__api__ast.html#ga70b22674525cec2b260ec92c642107b9" title="destroy an iterator on an AST.">tinyap_wi_delete</a>(wast_iterator_t);
<a name="l00236"></a><a class="code" href="group__api__ast.html#ga721fae9e37a39667ca738f1e4ce6e69c">00236</a> <span class="preprocessor">        #define wi_delete tinyap_wi_delete</span>
<a name="l00237"></a>00237 <span class="preprocessor"></span>
<a name="l00240"></a>00240         wast_t          <a class="code" href="group__api__ast.html#ga522fa6af6f0c12a143e3d9a385377353" title="get node under iterator">tinyap_wi_node</a>(wast_iterator_t);
<a name="l00241"></a><a class="code" href="group__api__ast.html#gae77f557213307805ad00f39cce25def0">00241</a> <span class="preprocessor">        #define wi_node tinyap_wi_node</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span>
<a name="l00245"></a>00245         wast_iterator_t <a class="code" href="group__api__ast.html#ga191ed63f4fb56b10996bb053b4ab7d1a" title="iterator jumps to parent">tinyap_wi_up</a>(wast_iterator_t);
<a name="l00246"></a><a class="code" href="group__api__ast.html#ga7540e72330f664cf22a2912d2a994733">00246</a> <span class="preprocessor">        #define wi_up tinyap_wi_up</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>
<a name="l00250"></a>00250         wast_iterator_t <a class="code" href="group__api__ast.html#ga7b6e9028bd6c07ca84f954c6f2b4a971" title="iterator jumps to first child">tinyap_wi_down</a>(wast_iterator_t);
<a name="l00251"></a><a class="code" href="group__api__ast.html#ga53d7ad369a1dbced06cefc9efd88099d">00251</a> <span class="preprocessor">        #define wi_down tinyap_wi_down</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span>
<a name="l00255"></a>00255         wast_iterator_t <a class="code" href="group__api__ast.html#ga5f1f0659492dacf7eef00ec4e748649b" title="iterator jumps to next sibling">tinyap_wi_next</a>(wast_iterator_t);
<a name="l00256"></a><a class="code" href="group__api__ast.html#ga6326e8fc0da3fff2a18afb5a52c17804">00256</a> <span class="preprocessor">        #define wi_next tinyap_wi_next</span>
<a name="l00257"></a>00257 <span class="preprocessor"></span>
<a name="l00260"></a>00260         wast_iterator_t <a class="code" href="group__api__ast.html#ga6b45e9f0bbe3c5c566b9d508c7715856" title="backup iterator state">tinyap_wi_backup</a>(wast_iterator_t);
<a name="l00261"></a><a class="code" href="group__api__ast.html#ga65c11181a47a60f8a3df7f46c4500dee">00261</a> <span class="preprocessor">        #define wi_backup tinyap_wi_backup</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span>
<a name="l00265"></a>00265         wast_iterator_t <a class="code" href="group__api__ast.html#ga2bd9875d164e3da2727827d2e6ccf787" title="restore iterator state">tinyap_wi_restore</a>(wast_iterator_t);
<a name="l00266"></a><a class="code" href="group__api__ast.html#gaf86d18de8f9c1c46aa506377df220210">00266</a> <span class="preprocessor">        #define wi_restore tinyap_wi_restore</span>
<a name="l00267"></a>00267 <span class="preprocessor"></span>
<a name="l00270"></a>00270         wast_iterator_t <a class="code" href="group__api__ast.html#gafc019afd69404a0ca11fe05e94185561" title="forget previous backup">tinyap_wi_validate</a>(wast_iterator_t);
<a name="l00271"></a><a class="code" href="group__api__ast.html#gafb75592b33fe5dfcdbfb9b87e5a0a38e">00271</a> <span class="preprocessor">        #define wi_validate tinyap_wi_validate</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>
<a name="l00275"></a>00275         wast_t          <a class="code" href="group__api__ast.html#gab425cf6e6fb4e5aec280025876c57ed9" title="get iterator&amp;#39;s root.">tinyap_wi_root</a>(wast_iterator_t);
<a name="l00276"></a>00276 <span class="preprocessor">        #define wi_root tinyap_wi_root</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>
<a name="l00280"></a>00280         wast_t          <a class="code" href="group__api__ast.html#ga7c0daf770b1f2656bcd85dd537c741e1" title="get iterator&amp;#39;s current parent.">tinyap_wi_parent</a>(wast_iterator_t);
<a name="l00281"></a><a class="code" href="group__api__ast.html#gaca9afe54b62bd4867fd431d745481c7d">00281</a> <span class="preprocessor">        #define wi_root tinyap_wi_root</span>
<a name="l00282"></a>00282 <span class="preprocessor"></span>
<a name="l00285"></a>00285         wast_iterator_t <a class="code" href="group__api__ast.html#ga0186fa50ebae7f1adf23aabb90d5b8d5" title="predicate &amp;quot;iterator is on root&amp;quot;, i.e. &amp;quot;NOT (node has a parent)&amp;quot;">tinyap_wi_dup</a>(<span class="keyword">const</span> wast_iterator_t);
<a name="l00286"></a><a class="code" href="group__api__ast.html#ga28c305b1e4a600fae9d635ccb4252cf0">00286</a> <span class="preprocessor">        #define wi_dup tinyap_wi_dup</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span>
<a name="l00290"></a>00290         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#gae9b27c85dcdd0c4daf5ca647dd198ca8" title="predicate &amp;quot;iterator is on root&amp;quot;, i.e. &amp;quot;NOT (node has a parent)&amp;quot;">tinyap_wi_on_root</a>(wast_iterator_t);
<a name="l00291"></a><a class="code" href="group__api__ast.html#ga0fe1c759b256caede652b48a5873fabd">00291</a> <span class="preprocessor">        #define wi_on_root tinyap_wi_on_root</span>
<a name="l00292"></a>00292 <span class="preprocessor"></span>
<a name="l00295"></a>00295         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#ga1f85247d6244fcabbce546923911024d" title="predicate &amp;quot;iterator is on a leaf&amp;quot;, i.e. &amp;quot;NOT (node has children)&amp;quot;">tinyap_wi_on_leaf</a>(wast_iterator_t);
<a name="l00296"></a><a class="code" href="group__api__ast.html#ga59bbebfee0a4b4351f7bbce2957e8000">00296</a> <span class="preprocessor">        #define wi_on_leaf tinyap_wi_on_leaf</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span>
<a name="l00300"></a>00300         <span class="keywordtype">int</span>             <a class="code" href="group__api__ast.html#gaf82def6153534dffab83848a76120575" title="predicate &amp;quot;iterator has a next sibling&amp;quot;, i.e. &amp;quot;NOT (node is last child)&amp;quot;">tinyap_wi_has_next</a>(wast_iterator_t);
<a name="l00301"></a><a class="code" href="group__api__ast.html#gaf77924c1455ebe78d5b7ea57ea336568">00301</a> <span class="preprocessor">        #define wi_has_next tinyap_wi_has_next</span>
<a name="l00302"></a>00302 <span class="preprocessor"></span>
<a name="l00305"></a>00305         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="group__api__ast.html#ga0f6d7073e8e9ede8a176222310e010bb" title="Render the text buffer that generated the AST ast when parsed using grammar.">tinyap_unparse</a>(wast_t grammar, wast_t ast);
<a name="l00306"></a>00306 
<a name="l00310"></a>00310         <span class="keywordtype">void</span>*           <a class="code" href="group__api__ast.html#ga5dc84d8c8e1c7dc66af3155aa0f2f0e2" title="walk the current output using this named pilot with this init data.">tinyap_walk_output</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* pilot_name, <span class="keywordtype">void</span>* pilot_init_data);
<a name="l00311"></a>00311 
<a name="l00315"></a>00315         <span class="keywordtype">void</span>*           <a class="code" href="group__api__ast.html#gae6c8ac64a37fd638c198dd789fb50fa5" title="walk this subtree using this named pilot with this init data.">tinyap_walk</a>(<span class="keyword">const</span> wast_t subtree, <span class="keyword">const</span> <span class="keywordtype">char</span>* pilot_name, <span class="keywordtype">void</span>* pilot_init_data);
<a name="l00318"></a>00318 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00319"></a>00319 <span class="preprocessor"></span>}
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="preprocessor">#if 0</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span><span class="keyword">namespace </span>TinyaP {
<a name="l00323"></a>00323 
<a name="l00324"></a>00324         <span class="keyword">class </span>AstNode {
<a name="l00325"></a>00325         <span class="keyword">public</span>:
<a name="l00326"></a>00326                 AstNode(ast_node_t ptr)
<a name="l00327"></a>00327                 { handle=ptr; initCache(ptr,0); }
<a name="l00328"></a>00328                 AstNode()
<a name="l00329"></a>00329                 { handle=0; cache=0; }
<a name="l00330"></a>00330                 ~AstNode()
<a name="l00331"></a>00331                 { <span class="keywordflow">if</span>(cache) <span class="keyword">delete</span>[] cache; }
<a name="l00332"></a>00332                 <span class="keywordtype">bool</span> isNil()<span class="keyword"> const</span>
<a name="l00333"></a>00333 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga6606bb9474345b80ad0ffe765a97bdd9" title="predicate &amp;quot;this node is nil&amp;quot;">tinyap_node_is_nil</a>(handle); }
<a name="l00334"></a>00334                 <span class="keywordtype">bool</span> isList()<span class="keyword"> const</span>
<a name="l00335"></a>00335 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga6afab005be78182fd53a2aeaeaf25a9b" title="predicate &amp;quot;this node is a list&amp;quot;">tinyap_node_is_list</a>(handle); }
<a name="l00336"></a>00336                 <span class="keywordtype">bool</span> isOp()<span class="keyword"> const</span>
<a name="l00337"></a>00337 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga6afab005be78182fd53a2aeaeaf25a9b" title="predicate &amp;quot;this node is a list&amp;quot;">tinyap_node_is_list</a>(handle)&amp;&amp;<a class="code" href="group__api__ast.html#gaca0840643204db7a83d851540155f132" title="predicate &amp;quot;this node is a string&amp;quot;">tinyap_node_is_string</a>(<a class="code" href="group__api__ast.html#gaf82027c99c57d27d1f147702d4dbda77" title="access to the n-th element of this list">tinyap_list_get_element</a>(handle,0)); }
<a name="l00338"></a>00338                 <span class="keywordtype">bool</span> isString()<span class="keyword"> const</span>
<a name="l00339"></a>00339 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#gaca0840643204db7a83d851540155f132" title="predicate &amp;quot;this node is a string&amp;quot;">tinyap_node_is_string</a>(handle); }
<a name="l00340"></a>00340                 <span class="keyword">const</span> <span class="keywordtype">char</span>* getString()<span class="keyword"> const</span>
<a name="l00341"></a>00341 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga2f40ca608b71ed9bf7e99f325839ae5b" title="access to the string value of this atom">tinyap_node_get_string</a>(handle); }
<a name="l00342"></a>00342                 AstNode* getOperand(<span class="keyword">const</span> <span class="keywordtype">int</span> n)<span class="keyword"> const</span>
<a name="l00343"></a>00343 <span class="keyword">                </span>{ <span class="keywordflow">return</span> cache[n+1]; }
<a name="l00344"></a>00344                 <span class="keywordtype">int</span> getOperandCount()<span class="keyword"> const</span>
<a name="l00345"></a>00345 <span class="keyword">                </span>{ <span class="keywordflow">return</span> cache_sz-1; }
<a name="l00346"></a>00346                 <span class="keyword">const</span> <span class="keywordtype">char</span>* getOperator()<span class="keyword"> const</span>
<a name="l00347"></a>00347 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga2f40ca608b71ed9bf7e99f325839ae5b" title="access to the string value of this atom">tinyap_node_get_string</a>(<a class="code" href="group__api__ast.html#gaf82027c99c57d27d1f147702d4dbda77" title="access to the n-th element of this list">tinyap_list_get_element</a>(handle,0)); }
<a name="l00348"></a>00348                 AstNode* getElement(<span class="keyword">const</span> <span class="keywordtype">int</span> n)<span class="keyword"> const</span>
<a name="l00349"></a>00349 <span class="keyword">                </span>{ <span class="keywordflow">return</span> cache[n]; }
<a name="l00350"></a>00350                 <span class="keyword">const</span> <span class="keywordtype">char</span>*toString()<span class="keyword"> const</span>
<a name="l00351"></a>00351 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#gad9c8ded4497d2d4872ac83d43183474c" title="serialize this node into a new C string (must be freed by the user)">tinyap_serialize_to_string</a>(handle); }
<a name="l00352"></a>00352                 <span class="keywordtype">void</span> toFile(<span class="keyword">const</span> <span class="keywordtype">char</span>*fnam)<span class="keyword"> const</span>
<a name="l00353"></a>00353 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#gaca1f72e03cba897b5dd558ca0fbe3e43" title="serialize this node to the named file">tinyap_serialize_to_file</a>(handle,fnam); }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355                 <span class="keywordtype">int</span> getRow()<span class="keyword"> const</span>
<a name="l00356"></a>00356 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga375694842109c18ade07173dfc625633" title="get the offset corresponding to this node in source text">tinyap_node_get_row</a>(handle); }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358                 <span class="keywordtype">int</span> getCol()<span class="keyword"> const</span>
<a name="l00359"></a>00359 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__ast.html#ga13bea2267329bea8aaf183080b59a14b" title="get the col corresponding to this node in source text">tinyap_node_get_col</a>(handle); }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361                 ast_node_t getHandle()<span class="keyword"> const</span>
<a name="l00362"></a>00362 <span class="keyword">                </span>{ <span class="keywordflow">return</span> handle; }
<a name="l00363"></a>00363         <span class="keyword">private</span>:
<a name="l00364"></a>00364                 ast_node_t handle;
<a name="l00365"></a>00365                 AstNode**cache;
<a name="l00366"></a>00366                 <span class="keywordtype">int</span> cache_sz;
<a name="l00367"></a>00367                 <span class="keywordtype">void</span> initCache(ast_node_t ptr,<span class="keywordtype">int</span> length)
<a name="l00368"></a>00368                 {
<a name="l00369"></a>00369                         <span class="keywordflow">if</span>(<a class="code" href="group__api__ast.html#gaca0840643204db7a83d851540155f132" title="predicate &amp;quot;this node is a string&amp;quot;">tinyap_node_is_string</a>(ptr))
<a name="l00370"></a>00370                         {
<a name="l00371"></a>00371                                 <span class="keywordflow">if</span>(length==0)
<a name="l00372"></a>00372                                 {
<a name="l00373"></a>00373                                         cache=0;
<a name="l00374"></a>00374                                 } <span class="keywordflow">else</span>
<a name="l00375"></a>00375                                 {
<a name="l00376"></a>00376                                         cache_sz=length+1;
<a name="l00377"></a>00377                                         cache=<span class="keyword">new</span> AstNode* [cache_sz];
<a name="l00378"></a>00378                                         cache[length]=<span class="keyword">new</span> AstNode(ptr);
<a name="l00379"></a>00379                                 }
<a name="l00380"></a>00380                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="group__api__ast.html#ga6afab005be78182fd53a2aeaeaf25a9b" title="predicate &amp;quot;this node is a list&amp;quot;">tinyap_node_is_list</a>(ptr))
<a name="l00381"></a>00381                         {
<a name="l00382"></a>00382                                 initCache(<a class="code" href="group__api__ast.html#gaf82027c99c57d27d1f147702d4dbda77" title="access to the n-th element of this list">tinyap_list_get_element</a>(ptr,1),length+1);
<a name="l00383"></a>00383                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ptr==0)
<a name="l00384"></a>00384                         {
<a name="l00385"></a>00385                                 cache_sz=length;
<a name="l00386"></a>00386                                 cache = <span class="keyword">new</span> AstNode* [cache_sz];
<a name="l00387"></a>00387                         }
<a name="l00388"></a>00388                 }
<a name="l00389"></a>00389         };
<a name="l00390"></a>00390 
<a name="l00391"></a>00391         <span class="keyword">class </span>Parser {
<a name="l00392"></a>00392         <span class="keyword">public</span>: Parser()
<a name="l00396"></a>00396                 { handle=<a class="code" href="group__api__parser.html#ga57bd7af783f8815e55d7bd9f083472ca" title="create a new parser with default context. create a parser with &amp;quot;explicit&amp;quot; metagrammar diale...">tinyap_new</a>(); grammar=output=0; }
<a name="l00397"></a>00397         <span class="keyword">static</span> Parser&amp; New()
<a name="l00402"></a>00402                 { <span class="keywordflow">return</span> *<span class="keyword">new</span> Parser(); }
<a name="l00403"></a>00403         ~Parser()
<a name="l00406"></a>00406                 {
<a name="l00407"></a>00407                         <a class="code" href="group__api__parser.html#gaa5a6d8eb7d78c69d76b24c47a59371ad" title="delete an instance of a parser">tinyap_delete</a>(handle);
<a name="l00408"></a>00408                         <span class="keywordflow">if</span>(grammar) <span class="keyword">delete</span> grammar;
<a name="l00409"></a>00409                         <span class="keywordflow">if</span>(output) <span class="keyword">delete</span> output;
<a name="l00410"></a>00410                 }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412                 <span class="keyword">const</span> <span class="keywordtype">char</span>*getGrammar()<span class="keyword"> const</span>
<a name="l00413"></a>00413 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#gad9f4e8394edc6157610bbe5323040e83" title="access to grammar source">tinyap_get_grammar</a>(handle); }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415                 Parser&amp; setGrammar(<span class="keyword">const</span> <span class="keywordtype">char</span>*gs)
<a name="l00416"></a>00416                 {
<a name="l00417"></a>00417                        <a class="code" href="group__api__parser.html#gae76033daa6428f63ab55fbaf33e86559" title="modification of grammar source (any filename, or &amp;quot;explicit&amp;quot; or &amp;quot;CamelCasing&amp;quot;)">tinyap_set_grammar</a>(handle,gs);
<a name="l00418"></a>00418                        <span class="keywordflow">if</span>(grammar) <span class="keyword">delete</span> grammar;
<a name="l00419"></a>00419                        grammar=<span class="keyword">new</span> AstNode(<a class="code" href="group__api__parser.html#ga785c521aaacf8bb6b76d3473fb7575d6" title="access to grammar ast">tinyap_get_grammar_ast</a>(handle));
<a name="l00420"></a>00420                        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00421"></a>00421                 }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423                 <span class="keyword">const</span> <span class="keywordtype">char</span>*getWhitespace()<span class="keyword"> const</span>
<a name="l00424"></a>00424 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#ga358248c20c8b239f4c64702eb985e2a5" title="access to whitespace characters list">tinyap_get_whitespace</a>(handle); }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426                 Parser&amp; setWhitespace(<span class="keyword">const</span> <span class="keywordtype">char</span>* ws)
<a name="l00427"></a>00427                 { <a class="code" href="group__api__parser.html#ga54b262578de65632c8b581928063bc78" title="modification of whitespace characters list">tinyap_set_whitespace</a>(handle, ws); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429                 Parser&amp; setWhitespaceRegexp(<span class="keyword">const</span> <span class="keywordtype">char</span>*wsre)
<a name="l00430"></a>00430                 { <a class="code" href="group__api__parser.html#gab8bca2b64e2845fea2857aa5edba9c88" title="modification of whitespace recognition regexp">tinyap_set_whitespace_regexp</a>(handle,wsre); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00431"></a>00431 
<a name="l00432"></a>00432                 AstNode* getGrammarAst()<span class="keyword"> const</span>
<a name="l00433"></a>00433 <span class="keyword">                </span>{ <span class="keywordflow">return</span> grammar; }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435                 Parser&amp; setGrammarAST(<span class="keyword">const</span> AstNode*gast)
<a name="l00436"></a>00436                 {
<a name="l00437"></a>00437                         <span class="keywordflow">if</span>(grammar) <span class="keyword">delete</span> grammar;
<a name="l00438"></a>00438                         <a class="code" href="group__api__parser.html#gad1552c03dd5651d22797052c11f6be53" title="modification of grammar ast">tinyap_set_grammar_ast</a>(handle,gast-&gt;getHandle());
<a name="l00439"></a>00439                         grammar=<span class="keyword">new</span> AstNode(gast-&gt;getHandle());
<a name="l00440"></a>00440                         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00441"></a>00441                 }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443                 <span class="keyword">const</span> <span class="keywordtype">char</span>*getSourceFile()<span class="keyword"> const</span>
<a name="l00444"></a>00444 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#gaebf46f45543bef7abc7a16183e485e10" title="access to filename of text input source (may be NULL)">tinyap_get_source_file</a>(handle); }
<a name="l00445"></a>00445 
<a name="l00446"></a>00446                 <span class="keyword">const</span> <span class="keywordtype">char</span>*getSourceBuffer()<span class="keyword"> const</span>
<a name="l00447"></a>00447 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#ga5fce588f798754634e615556d23cb234" title="access to buffer of text input source (i.e. contents of file or configured memory buffer)...">tinyap_get_source_buffer</a>(handle); }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getSourceBufferLength()<span class="keyword"> const</span>
<a name="l00450"></a>00450 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#ga3d9a781425222f53fc541598e7e9b31d" title="access to length of text input source">tinyap_get_source_buffer_length</a>(handle); }
<a name="l00451"></a>00451 
<a name="l00452"></a>00452                 Parser&amp; setSourceFile(<span class="keyword">const</span> <span class="keywordtype">char</span>*fnam)
<a name="l00453"></a>00453                 { <a class="code" href="group__api__parser.html#gac7b3eef1d0e6415be8f051616ae6e23b" title="set named file as text input CAUTION : if source filename is &amp;quot;-&amp;quot; or &amp;quot;stdin&amp;quot;, standard input will be read until closed, and the function will block meanwhile.">tinyap_set_source_file</a>(handle,fnam); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455                 Parser&amp; setSourceBuffer(<span class="keyword">const</span> <span class="keywordtype">char</span>*buf,<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len)
<a name="l00456"></a>00456                 { <a class="code" href="group__api__parser.html#gaf580a47f588edaa4e71c1417adfe29a4" title="set buffer as text input source">tinyap_set_source_buffer</a>(handle,buf,len); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458                 <span class="keywordtype">bool</span> parse()
<a name="l00459"></a>00459                 {
<a name="l00460"></a>00460                         <a class="code" href="group__api__parser.html#gaa32aeac89d5801102f813153bfa9ce30" title="perform parsing of configured source with configured grammar. If the passed flag is true...">tinyap_parse</a>(handle);
<a name="l00461"></a>00461                         <span class="keywordflow">if</span>(output) <span class="keyword">delete</span> output;
<a name="l00462"></a>00462                         output=<span class="keyword">new</span> AstNode(<a class="code" href="group__api__parser.html#ga5837d9ab0520fe3c63258d31d2fbfb27" title="access to last parsing output">tinyap_get_output</a>(handle));
<a name="l00463"></a>00463                         <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#ga76bb6c98d6441829ec0a647563944618" title="predicate &amp;quot;the last parsing was successful&amp;quot;">tinyap_parsed_ok</a>(handle);
<a name="l00464"></a>00464                 }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466                 <span class="keywordtype">bool</span> parseAsGrammar()
<a name="l00467"></a>00467                 {
<a name="l00468"></a>00468                         <span class="keywordflow">if</span>(<a class="code" href="group__api__parser.html#gac43c0a5c5912415bf8e4eeb3c11a521a" title="perform parsing of configured source with configured grammar and uses the output as the new grammar...">tinyap_parse_as_grammar</a>(handle))
<a name="l00469"></a>00469                         {
<a name="l00470"></a>00470                                 <span class="keywordflow">if</span>(grammar) <span class="keyword">delete</span> grammar;
<a name="l00471"></a>00471                                 grammar=<span class="keyword">new</span> AstNode(<a class="code" href="group__api__parser.html#ga785c521aaacf8bb6b76d3473fb7575d6" title="access to grammar ast">tinyap_get_grammar_ast</a>(handle));
<a name="l00472"></a>00472                                 <span class="keywordflow">if</span>(output) <span class="keyword">delete</span> output;
<a name="l00473"></a>00473                                 output=<span class="keyword">new</span> AstNode(<a class="code" href="group__api__parser.html#ga5837d9ab0520fe3c63258d31d2fbfb27" title="access to last parsing output">tinyap_get_output</a>(handle));
<a name="l00474"></a>00474                         }
<a name="l00475"></a>00475                         <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#ga76bb6c98d6441829ec0a647563944618" title="predicate &amp;quot;the last parsing was successful&amp;quot;">tinyap_parsed_ok</a>(handle);
<a name="l00476"></a>00476                 }
<a name="l00477"></a>00477 
<a name="l00478"></a>00478                 <span class="keywordtype">bool</span> parsedOK()<span class="keyword"> const</span>
<a name="l00479"></a>00479 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#ga76bb6c98d6441829ec0a647563944618" title="predicate &amp;quot;the last parsing was successful&amp;quot;">tinyap_parsed_ok</a>(handle); }
<a name="l00480"></a>00480 
<a name="l00481"></a>00481                 AstNode* getOutput()<span class="keyword"> const</span>
<a name="l00482"></a>00482 <span class="keyword">                </span>{ <span class="keywordflow">return</span> output; }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484                 <span class="keywordtype">int</span> getErrorCol()<span class="keyword"> const</span>
<a name="l00485"></a>00485 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#gae8fc94643392875d0964bed7f128c71b" title="get the column where the parsing error occured in source text (offsets start at 1)">tinyap_get_error_col</a>(handle); }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487                 <span class="keywordtype">int</span> getErrorRow()<span class="keyword"> const</span>
<a name="l00488"></a>00488 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#gaf1cfe686073bf2e67d6a16b5988374ce" title="get the line where the parsing error occured in source text (offsets start at 1)">tinyap_get_error_row</a>(handle); }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490                 <span class="keyword">const</span> <span class="keywordtype">char</span>* getError()<span class="keyword"> const</span>
<a name="l00491"></a>00491 <span class="keyword">                </span>{ <span class="keywordflow">return</span> <a class="code" href="group__api__parser.html#gae813a4556e261c3bcdd09be392180fc8" title="get the source text around the parsing error, and a cursor indicating the column where the error occu...">tinyap_get_error</a>(handle); }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493                 <a class="code" href="tinyap_8h.html#ad8ed219d2f8f2b0218cda7a75be2dd41">tinyap_t</a> getHandle()<span class="keyword"> const</span>
<a name="l00494"></a>00494 <span class="keyword">                </span>{ <span class="keywordflow">return</span> handle; }
<a name="l00495"></a>00495         <span class="keyword">private</span>:
<a name="l00496"></a>00496                 <a class="code" href="tinyap_8h.html#ad8ed219d2f8f2b0218cda7a75be2dd41">tinyap_t</a> handle;
<a name="l00497"></a>00497                 AstNode*grammar,*output;
<a name="l00498"></a>00498         };
<a name="l00499"></a>00499 }
<a name="l00500"></a>00500 <span class="preprocessor">#endif</span>
<a name="l00501"></a>00501 <span class="preprocessor"></span>
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="preprocessor">#endif</span>
<a name="l00504"></a>00504 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00505"></a>00505 <span class="preprocessor"></span>
<a name="l00506"></a>00506 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Sep 23 2011 09:29:10 for tinyap by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
